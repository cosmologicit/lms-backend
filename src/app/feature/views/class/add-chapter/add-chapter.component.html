<div class="card mb-0" style="max-height: 99vh;overflow: auto; ">
    <div class="d-flex justify-content-between align-items-center p-3">
        <span class="title">{{status}} Chapter</span>
        <i class="fa-regular fa-x pointer" (click)="close()"></i>
    </div>
    <hr class="m-0">
    <div class="p-3">
        <form #chapterForm="ngForm" style="max-height: 65vh;overflow: auto;">
            <div class="form-field mt-1" *ngIf="status=='Edit'">
                <label class="label">Name*</label>
                <input type="text" class="form-control" [(ngModel)]="data.name" name="name" #name="ngModel" required
                    [ngClass]="{'is-invalid':name.touched && name.errors && name.errors['required']}">
                <p *ngIf="name.touched && name.errors && name.errors['required']" class="validation-error ">
                    Name is required
                </p>
            </div>
            <div class="form-field mt-4" *ngIf="status=='Edit'">
                <label class="label">Code</label>
                <input type="text" class="form-control" [(ngModel)]="data.code" name="code" #code="ngModel">
            </div>
            <div [ngClass]="status=='Add'?'d-flex w-100':''">
                <div class="form-field w-100" [ngClass]="status=='Add'?'mt-1 me-2':'mt-4'">
                    <label class="label">Class*</label>
                    <select class="form-select" [(ngModel)]="data.associationId" name="associationId"
                        #associationId="ngModel" (change)="filterSubject()" required
                        [ngClass]="{'is-invalid':associationId.touched && associationId.errors && associationId.errors['required']}">
                        <p *ngIf="associationId.touched && associationId.errors && associationId.errors['required']"
                            class="validation-error ">
                            Class is required
                        </p>
                        <option *ngFor="let class of classes" [value]="class.id">{{class.name}}</option>
                    </select>
                </div>
                <div class="form-field w-100" [ngClass]="status=='Add'?'mt-1 ms-2':'mt-4'"
                    *ngIf="data.associationId && filteredSubjects.length>0">
                    <label class="label">Subject*</label>
                    <select class="form-select" [(ngModel)]="data.subjectId" name="course" #subjectId="ngModel" required
                        [ngClass]="{'is-invalid':subjectId.touched && subjectId.errors && subjectId.errors['required']}">
                        <p *ngIf="subjectId.touched && subjectId.errors && subjectId.errors['required']"
                            class="validation-error ">
                            Subject is required
                        </p>
                        <option *ngFor="let subject of filteredSubjects" [value]="subject.id">{{subject.name}}</option>
                    </select>
                </div>
            </div>
            <div *ngIf="status=='Add'" class="row g-0">
                <div class="col-11">
                    <div *ngFor="let chapter of saveChapter.chapterDetails;let idx = index">
                        <div class="d-flex justify-content-between align-items-center w-100">
                            <div class="form-field mt-4 w-100">
                                <label class="label">Name*</label>
                                <input type="text" class="form-control" [(ngModel)]="chapter.name" [name]="idx+'name'">
                            </div>
                            <div class="form-field mt-4 w-50 mx-2">
                                <label class="label">Code</label>
                                <input type="text" class="form-control" [(ngModel)]="chapter.code" [name]="idx+'code'"
                                    #code="ngModel">
                            </div>
                            <div class=" mt-3">
                                <i class="fa-solid fa-trash text-danger pointer" (click)="removeChapter(idx)"></i>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-1 d-flex justify-content-center align-items-end mb-3">
                    <i class="fa-regular fa-plus pointer mt-4" style="font-size: 21px;font-weight: 600;color: #1b3e99;"
                        (click)="addChapter()"></i>
                </div>
            </div>
            <!-- <div class="form-field mt-4">
                <label class="label">Branch</label>
                <select class="form-select" [(ngModel)]="data.instituteBranchId" name="department"
                    #department="ngModel">
                    <option *ngFor="let branch of branches" [value]="branch.id">{{branch.name}}</option>
                </select>
            </div> -->
        </form>
    </div>
    <hr class="m-0">
    <div class="d-flex justify-content-end p-3">
        <button type="button" class="btn btn-secondary mx-2" (click)="close()">Cancel</button>
        <button class="btn btn-primary" (click)="onSubmit()">{{details.id?'Update':'Save'}}</button>
    </div>
</div>